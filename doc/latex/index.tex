\chapter{Holtek HT1621}
\hypertarget{index}{}\label{index}\index{Holtek HT1621@{Holtek HT1621}}
\begin{DoxyAuthor}{Author}
Enrico Formenti
\end{DoxyAuthor}
\hypertarget{index_sec_intro}{}\doxysection{\texorpdfstring{Introduction}{Introduction}}\label{index_sec_intro}
The Holtek \doxylink{class_h_t1621}{HT1621} is multi-\/function LCD driver with a 32x4 memory mapping capability. It has a simple interface with microprocessors (3-\/wire serial communication) and a built-\/in tone generator with two frequences (2k\+Hz and 4k\+Hz). It supports both internal oscillator (256k\+Hz) or external (256k\+Hz). With 1/2, 1/3 bias and 1/2, 1/3, 1/4 duty cycle is suitable for many general purpose LCD applications.\hypertarget{index_sec_dispmem}{}\doxysection{\texorpdfstring{Display memory}{Display memory}}\label{index_sec_dispmem}
The RAM is organized into an array of 32 cells of 4 bits each as illustrated by Figure 1. The content of the RAM is directly mapped to the content of the LCD driver and may be affected by the commands {\ttfamily READ}, {\ttfamily WRITE}, {\ttfamily READ-\/\+MODIFY-\/\+WRITE}.


\begin{DoxyImage}
\includegraphics[width=\textwidth,height=\textheight/2,keepaspectratio=true]{HT1621mem.png}
\doxyfigcaption{Figure 1. Memory structure of the HT1621. Remark that we have restructure the adresses so to be able to take care of a full digit.}
\end{DoxyImage}
 \hypertarget{index_sec_osc}{}\doxysection{\texorpdfstring{System oscillator}{System oscillator}}\label{index_sec_osc}
The system clock is used in a variety of tasks included LCD driving clock and tone frequency generation. \doxylink{class_h_t1621}{HT1621} has a built-\/in RC oscillator (256k\+HZ) and a crystal oscillator (32768Hz). An external 256KHz oscillator can also be used. The type of oscillator used can be selecting by issuing {\ttfamily XTAL32K}, {\ttfamily RC256K} or {\ttfamily EXT256K} commands.

Issuing a {\ttfamily SYS\+\_\+\+DIS} command stops the system clock, the LCD bias generator and the time base/\+WDT. The LCD screen will appear blank.

An {\ttfamily LCD\+\_\+\+OFF} command will turn off the bias generator but not the system clock. Issuing a {\ttfamily SYS\+\_\+\+DIS} command will power down the system reducing power consumption.

\begin{DoxyWarning}{Warning}
The {\ttfamily SYS\+\_\+\+DIS} command affects the system only when the internal RC 256k\+HZ or the 32.\+768k\+Hz crystal clocks are used.
\end{DoxyWarning}
\hypertarget{index_sec_tone}{}\doxysection{\texorpdfstring{Tone output}{Tone output}}\label{index_sec_tone}
The \doxylink{class_h_t1621}{HT1621} can provide a tone output at the pins {\ttfamily BZ} and {\ttfamily $\bar{BZ}$}. There are only two tone frequencies, namely\+: 2k\+Hz and 4k\+Hz that can be selected using the {\ttfamily TONE2K} or {\ttfamily TONE4K}, respectively. Then, the buzzer (if connected to {\ttfamily BZ} and {\ttfamily $\bar{BZ}$}) start playing at the {\ttfamily TONE\+\_\+\+ON} command. Sound is stopped issuing the {\ttfamily TONE\+\_\+\+OFF} command.\hypertarget{index_sec_powon}{}\doxysection{\texorpdfstring{Power-\/on}{Power-\/on}}\label{index_sec_powon}
At power-\/on the system is in {\ttfamily SYS\+\_\+\+DIS} state. A generic LCD initialization sequence will consist of the following steps\+:
\begin{DoxyItemize}
\item System Enable
\item Oscillator configuration
\item Bias/com configuration
\item Bias generator start (LCD\+\_\+\+ON)
\end{DoxyItemize}\hypertarget{index_sec_history}{}\doxysection{\texorpdfstring{History}{History}}\label{index_sec_history}
\hypertarget{index_subsec_v1_0}{}\doxysubsection{\texorpdfstring{Version 1.\+0}{Version 1.\+0}}\label{index_subsec_v1_0}
This the first public version.\hypertarget{index_sec_todo}{}\doxysection{\texorpdfstring{Todo list}{Todo list}}\label{index_sec_todo}

\begin{DoxyItemize}
\item Improve the overall documentation.
\item Optimize delays in both writing and reading functions
\item Overload {\ttfamily \doxylink{class_h_t1621_a4287d551e4a19a6dc5b5bc5005cd88a1}{HT1621\+::send\+Command()}} function to send several commands in a row
\item Test reading functions which use the internal RAM of \doxylink{class_h_t1621}{HT1621} not the simulated RAM. 
\end{DoxyItemize}